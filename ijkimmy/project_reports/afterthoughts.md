# 개인 회고

### 이번 프로젝트에서 나의 목표는 무엇이었는가?

- 이런 대회에 참여하는 것이 처음이였기에 많은 것들이 서툴고 낯설었습니다. 이번 프로젝트의 목표는 이와 같은 대회를 진행하는 것에 익숙해지고, 최대한 많은 것을 시도해봄으로서 배우고 이를 기록하며, 팀으로서 협업하는 것에 능숙해 지는 것이었습니다.

### 나는 내 학습목표를 달성하기 위해 무엇을 어떻게 했는가?

- 원활한 실험 공유를 위해 team wandb project를 생성했으나 생각보다 잘 사용하지 못했습니다. 주어진 baseline code에 유의미한 수정사항이 있을 때마다 최대한 자세히 자주 commit & push 하였습니다.

### 나는 어떤 방식으로 모델을 개선했는가?

- *데이터 불균형*. EDA를 통해 데이터 불균형이 심하다는 것을 깨달았고 이를 해결하기 위해 WeightedRandomSampler, StratifiedKFold, WeightedCrossEntropy 등을 구현하였습니다.
- *전처리 & 증식.* 이미지 내의 인물이 대게 가운데에 위치하다는 것을 알고 CenterCrop을 적용시켜주었습니다. 인물의 위치를 찾아 crop해주려 cv2의 라이브러리를 사용해 시도했으나 생각보다 얼굴의 위치를 잘 찾지 못해 적용시키지 않았습니다. EDA결과를 기반으로 데이터셋 이미지의 밝기와 위치, 각도 등에 변화를 줘 증식 시켜주었습니다.
- *모델링.* ImageNet 데이터 분포를 살펴본 결과 본 대회의 데이터셋과 종류가 다르다고 생각해 얼굴이미지로 기학습된 모델인 VGGFace을 사용해보았으나 성능이 크게 나아지지 않았습니다. 데이터 유사도에 따라 모델별로 fine-tuning에 변화를 주었습니다. Overfitting을 막기 위해 early stopping을 구현하였습니다.
- *Ensemble.* hard & soft voting을 구현하였습니다.

### 내가 한 행동의 결과로 어떤 지점을 달성하고, 어떠한 깨달음을 얻었는가?

- 모델의 구현만큼 데이터셋 분석이 중요하다는 점을 배웠습니다. “얼굴 이미지의 나이, 성별, 마스크 분류 문제”에만 초점을 맞추는 것이 아닌 데이터셋의 특징인 “적은 데이터셋, 각 클래스 별 불균형의 정도”에도 초점을 맞추었어야 함을 배웠습니다.

### 전과 비교해서, 내가 새롭게 시도한 변화는 무엇이고, 어떤 효과가 있었는가?

- Jupyter notebook이 아닌 python으로 DL코드를 작성하는 것이 가독성이나 추후에 재사용면에서 더 좋다는 것을 배웠습니다. wandb와 같은 플랫폼사용과 좀더 잦고 자세한 github commit등을 시도해보았고, 더욱이 스스로 익숙해졌습니다.

### 마주한 한계는 무엇이며, 아쉬웠던 점은 무엇인가?

- 시각화 부문이 약하다는 것을 깨달았습니다. 전반적으로 아쉬웠던 점은 대회 초반에 주어진 데이터셋을 바꾸면 안된다는 생각에 사로잡혀 이를 일체 변화시켜 보지 않은 점이 있습니다. 추후에 기회가 된다면 다음과 같은 방법들을 적용시켜보고 싶습니다.
    1. 전처리한 이미지를 저장 & 불러오기 
    대회가 어느 정도 진행되고 나서야 전처리를 진행한 이미지를 저장 및 불러오기 하는 것이 훨씬 더 시간 효과적인 것을 깨달았습니다. 이미 늦었다고 생각해 진행하지 않았으나, 늦었더라도 이를 적용시키는 것이 나았음을 깨달았습니다. 
    2. face detection & 배경 날리는 전처리.
    cv2 라이브러리의 face detection 성능을 보고, 성능이 더욱 괜찮은 라이브러리를 찾아보려다 미처 적용시키지 못한 점이 아쉬웠습니다. 또한 EDA과정에서 다른 인물이 동일 배경을 가지고 있음을 보았음에도 배경을 날리는 전처리를 진행하지 않은 점이 아쉬웠습니다. 
    3. 학습 데이터 레이블 변화
        1. 가장 숫자가 적은 60대 이상의 연령대 클래스를 레이블을 변화시켜 줌으로서 증식시켜보고 싶습니다. (i.e. 60대 이상 → 50대 중후반 이상)
        2. 각 연령대 클래스 boundary 내에 있는 데이터들을 날려주어 보다 효과적으로 나이 비교를 할 수 있도록 실험해 보고 싶습니다. 
    4. 다른 모델 활용
    pretrained된 pytorch의 기본 모델들이 아닌 다른 모델들도 적용시켜 보고 싶습니다. 
    5. Validation set ratio 변화 주기
    주어진 데이터셋의 크기가 작기 때문에 원래 default값으로 지정되있는 0.2의 validation set ratio 를 보다 작은 비율로 줄여주는 것이 성능 개선에 효과적일 것 같습니다. 
    6. Checkpoint & 학습 resume 기능
    baseline code가 작성된 기존의 pytorch template 내의 유틸 기능이었던 checkpoint와 resume기능을 구현 및 사용 해보고 싶습니다. 
    7. Boosting 실험
    대회 마지막을 달리며 ensemble 방법 중 잘못 예측한 값을 토대로 배우는 adaboost를 실제로 구현 및 적용시켜 보고 싶습니다. 

### 한계/교훈을 바탕으로 다음 P-Stage에서 스스로 새롭게 시도해볼 것은 무엇일까?

- 다소 부족했던 시각화 부문이나 데이터 분석 및 문제 파악하는 능력을 키워보고 싶습니다. 팀원들과의 커뮤니케이션이나 앞으로 해나가야 될 것들, 큰그림을 그린 후 진행하지 않아서 많이 아쉬웠습니다. 무작정 시작하기보다 이 방법을 왜 구현해야하는지, 얼마나 성능이 나아질지 충분한 자료조사 후 팀원들과 의논 후에 적용시켰더라면 더 나은 결과가 있지 않았을까 생각이 듭니다. 다음에는 더욱이 협업에 중점을 두며 대회를 풀어 나가고 싶습니다.